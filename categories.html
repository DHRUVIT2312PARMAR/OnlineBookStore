<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Categories - Online Bookstore</title>
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center" href="index.html">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-book me-2" viewBox="0 0 16 16">
            <path d="M1 2.82v10.92a1 1 0 0 0 1.5.86l2.5-.86a1 1 0 0 1 .5-.14h6.5a1 1 0 0 0 1 1V4.5a1 1 0 0 0-1-1H7.5a1 1 0 0 1-.5-.14l-2.5-.86a1 1 0 0 0-1.5.86ZM4 1.763l2.5-.86c.883-.304 1.7.228 2 .93L8 2.82v9.52a2 2 0 0 1-1.5.55l-2.5.86a2 2 0 0 1-2 .14V3.123c-.722-.249-1.5.34-1.5 1.14v8.52c0 .8.673 1.488 1.5 1.583L4 14.283V1.763ZM12 4.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z"/>
          </svg>
          <span class="fs-4">Online Bookstore</span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="categories.html">Categories</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="authors.html">Authors</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="cart.html">Cart</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="user.html">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">Contact</a>
            </li>
          </ul>
          <div class="d-flex" role="search">
            <input
              id="search-input"
              class="form-control me-2"
              type="search"
              placeholder="Search Books"
              aria-label="Search"/>
          </div>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <!-- Page Header -->
      <div class="row">
        <div class="col-12 section-header">
          Book Categories & Listings
        </div>
      </div>

      <!-- Category Filter Buttons -->
      <div class="row mb-4">
        <div class="col-12">
          <h3 class="mb-3">Browse by Category</h3>
          <div class="d-flex flex-wrap gap-2">
            <button class="btn btn-simple category-btn" data-category="Information Technology">Information Technology</button>
            <button class="btn btn-simple category-btn" data-category="Cyber Security">Cyber Security</button>
            <button class="btn btn-simple category-btn" data-category="Agentic AI">Agentic AI</button>
            <button class="btn btn-simple category-btn" data-category="UI/UX">UI/UX</button>
            <button class="btn btn-simple show-all-btn" id="showAllBtn">Show All Books</button>
          </div>
        </div>
      </div>

      <!-- Book Cards Section -->
      <div class="row mb-4">
        <div class="col-12">
          <h3 class="mb-3">Featured Books</h3>
        </div>
      </div>

      <div class="row g-4 justify-content-center" id="books-container">
        <!-- Book cards will be populated here -->
      </div>

      <!-- Book Table Section -->
      <div class="row mt-5">
        <div class="col-12">
          <h3 class="mb-3">All Books (Table View)</h3>
          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead class="table-dark">
                <tr>
                  <th scope="col">Cover</th>
                  <th scope="col">Title</th>
                  <th scope="col">Author</th>
                  <th scope="col">Category</th>
                  <th scope="col">Price</th>
                  <th scope="col">Rating</th>
                  <th scope="col">Actions</th>
                </tr>
              </thead>
              <tbody id="book-table-body">
                <!-- Table rows will be populated here -->
              </tbody>
            </table>
          </div>

          <!-- Pagination -->
          <nav aria-label="Book page navigation">
            <ul class="pagination justify-content-center mt-4">
              <li class="page-item" id="previous-page-btn">
                <a class="page-link" href="#" aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>
              <li class="page-item disabled" id="pagination-info">
                <a class="page-link"></a>
              </li>
              <li class="page-item" id="next-page-btn">
                <a class="page-link" href="#" aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>

    <!-- Book Details Modal -->
    <div class="modal fade" id="bookDetailsModal" tabindex="-1" aria-labelledby="bookDetailsModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="bookDetailsModalLabel">Book Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-md-4 text-center">
                <img id="modal-image" src="" alt="Book Cover" class="book-cover">
              </div>
              <div class="col-md-8 text-start">
                <h4 id="modal-title" class="fw-bold"></h4>
                <p class="text-muted" id="modal-author"></p>
                <p class="lead fw-bold" id="modal-price"></p>
                <p id="modal-description"></p>
                <p class="text-muted" id="modal-category"></p>
                <div class="rating mb-2" id="modal-rating"></div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <a href="book-details.html" class="btn btn-simple">View Full Details</a>
            <button type="button" class="btn btn-simple">Add to Cart</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const books = [
        {
          image: "images/book1.jpg",
          title: "Practical AI Agents",
          author: "Alex Johnson",
          price: 45.99,
          rating: 4.5,
          category: "Agentic AI",
          type: "new_arrival",
          description: "This book provides a hands-on guide to building and deploying intelligent AI agents, covering everything from foundational principles to advanced real-world applications."
        },
        {
          image: "images/book2.jpg",
          title: "Web Application Security",
          author: "Sarah Chen",
          price: 59.99,
          rating: 4.8,
          category: "Cyber Security",
          type: "new_arrival",
          description: "A comprehensive guide to identifying and mitigating vulnerabilities in modern web applications, focusing on best practices for secure coding, authentication, and data handling."
        },
        {
          image: "images/book3.jpg",
          title: "The Art of UI Design",
          author: "Mike Thompson",
          price: 35.50,
          rating: 4.6,
          category: "UI/UX",
          type: "new_arrival",
          description: "Explore the principles of creating intuitive and visually appealing user interfaces, with practical examples and case studies on typography, color theory, and layout design."
        },
        {
          image: "images/book4.jpg",
          title: "The Ultimate Guide to UX",
          author: "Emily White",
          price: 49.00,
          rating: 4.9,
          category: "UI/UX",
          type: "best_seller",
          description: "Journey into the world of User Experience, learning how to conduct user research, create wireframes, and design products that meet user needs and business goals."
        },
        {
          image: "images/book5.jpg",
          title: "IT Fundamentals for Beginners",
          author: "David Lee",
          price: 29.99,
          rating: 4.2,
          category: "Information Technology",
          type: "best_seller",
          description: "This book covers the core concepts of information technology, from hardware and software basics to networking, databases, and system administration, making it perfect for newcomers."
        },
        {
          image: "images/book6.jpg",
          title: "Cryptography for Developers",
          author: "Mark Evans",
          price: 65.75,
          rating: 4.7,
          category: "Cyber Security",
          type: "best_seller",
          description: "Learn how to implement strong cryptographic algorithms and secure data in your applications. This book focuses on practical, code-based examples for developers."
        },
        {
          image: "images/book7.jpg",
          title: "Advanced Prompt Engineering",
          author: "Laura Adams",
          price: 55.00,
          rating: 4.4,
          category: "Agentic AI",
          type: "best_seller",
          description: "This book explores techniques for crafting effective prompts to guide large language models and other AI systems, unlocking their full potential."
        },
        {
          image: "images/book8.jpg",
          title: "Network & Systems Administration",
          author: "Chris Green",
          price: 42.50,
          rating: 4.1,
          category: "Information Technology",
          type: "new_arrival",
          description: "An in-depth guide to managing and maintaining computer networks and systems, including troubleshooting, security best practices, and performance optimization."
        }
      ];

      const booksContainer = document.getElementById('books-container');
      const bookTableBody = document.getElementById('book-table-body');
      const categoryButtons = document.querySelectorAll('.category-btn');
      const showAllBtn = document.getElementById('showAllBtn');
      const searchInput = document.getElementById('search-input');
      const previousPageBtn = document.getElementById('previous-page-btn');
      const nextPageBtn = document.getElementById('next-page-btn');
      const paginationInfo = document.getElementById('pagination-info');

      // Pagination variables
      let currentPage = 1;
      const booksPerPage = 4;
      let currentFilteredBooks = books;

      // Modal elements
      const bookDetailsModal = new bootstrap.Modal(document.getElementById('bookDetailsModal'));
      const modalImage = document.getElementById('modal-image');
      const modalTitle = document.getElementById('modal-title');
      const modalAuthor = document.getElementById('modal-author');
      const modalPrice = document.getElementById('modal-price');
      const modalDescription = document.getElementById('modal-description');
      const modalCategory = document.getElementById('modal-category');
      const modalRating = document.getElementById('modal-rating');

      // Function to render star ratings
      function getStarRating(rating) {
        let stars = '';
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 !== 0;

        for (let i = 0; i < fullStars; i++) {
          stars += '<i class="bi bi-star-fill text-warning"></i>';
        }
        if (hasHalfStar) {
          stars += '<i class="bi bi-star-half text-warning"></i>';
        }
        const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
        for (let i = 0; i < emptyStars; i++) {
          stars += '<i class="bi bi-star text-warning"></i>';
        }
        return stars;
      }

      // Function to generate and render book cards
      function renderBooks() {
        booksContainer.innerHTML = '';

        const startIndex = (currentPage - 1) * booksPerPage;
        const endIndex = startIndex + booksPerPage;
        const booksOnPage = currentFilteredBooks.slice(startIndex, endIndex);

        booksOnPage.forEach(book => {
          booksContainer.innerHTML += `
            <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
              <div class="book-card">
                <img src="${book.image}" alt="${book.title} book cover" class="img-fluid book-cover">
                <div class="book-card-body">
                  <div>
                    <h5>${book.title}</h5>
                    <p class="text-muted mb-0">by ${book.author}</p>
                    <p class="fw-bold mb-1">$${book.price.toFixed(2)}</p>
                    <div class="rating mb-2">
                      ${getStarRating(book.rating)}
                      <small class="text-muted">(${book.rating})</small>
                    </div>
                    <span class="badge bg-secondary mb-2">${book.category}</span>
                  </div>
                  <button class="btn btn-simple w-100 view-details-btn" data-bs-toggle="modal" data-bs-target="#bookDetailsModal" data-book-index="${books.indexOf(book)}">View Details</button>
                </div>
              </div>
            </div>
          `;
        });
      }

      function renderTablePage() {
        bookTableBody.innerHTML = '';
        const startIndex = (currentPage - 1) * booksPerPage;
        const endIndex = startIndex + booksPerPage;
        const booksOnPage = currentFilteredBooks.slice(startIndex, endIndex);

        booksOnPage.forEach(book => {
          bookTableBody.innerHTML += `
            <tr>
              <td><img src="${book.image}" alt="${book.title}" class="img-fluid" style="width: 60px; height: auto;"></td>
              <td>${book.title}</td>
              <td>${book.author}</td>
              <td><span class="badge bg-secondary">${book.category}</span></td>
              <td>$${book.price.toFixed(2)}</td>
              <td>
                <div class="rating">
                  ${getStarRating(book.rating)}
                  <small class="text-muted ms-1">(${book.rating})</small>
                </div>
              </td>
              <td>
                <button class="btn btn-sm btn-simple view-details-btn" data-bs-toggle="modal" data-bs-target="#bookDetailsModal" data-book-index="${books.indexOf(book)}">View</button>
                <button class="btn btn-sm btn-simple">Add to Cart</button>
              </td>
            </tr>
          `;
        });
        updatePaginationControls();
      }

      function updatePaginationControls() {
        const totalPages = Math.ceil(currentFilteredBooks.length / booksPerPage);
        paginationInfo.querySelector('a').innerText = `Page ${currentPage} of ${totalPages}`;

        previousPageBtn.classList.toggle('disabled', currentPage === 1);
        nextPageBtn.classList.toggle('disabled', currentPage === totalPages);
      }

      previousPageBtn.addEventListener('click', (e) => {
        e.preventDefault();
        if (currentPage > 1) {
          currentPage--;
          renderBooks();
          renderTablePage();
        }
      });

      nextPageBtn.addEventListener('click', (e) => {
        e.preventDefault();
        const totalPages = Math.ceil(currentFilteredBooks.length / booksPerPage);
        if (currentPage < totalPages) {
          currentPage++;
          renderBooks();
          renderTablePage();
        }
      });

      // Event listener for modal trigger button
      document.addEventListener('click', function(event) {
        if (event.target.matches('.view-details-btn')) {
          const bookIndex = event.target.getAttribute('data-book-index');
          const book = books[bookIndex];

          modalImage.src = book.image;
          modalTitle.innerText = book.title;
          modalAuthor.innerText = `by ${book.author}`;
          modalPrice.innerText = `$${book.price.toFixed(2)}`;
          modalDescription.innerText = book.description;
          modalCategory.innerText = `Category: ${book.category}`;
          modalRating.innerHTML = `
            <div class="rating">
              ${getStarRating(book.rating)}
              <small class="text-muted ms-1">(${book.rating})</small>
            </div>
          `;
        }
      });

      // Event listener for category buttons
      categoryButtons.forEach(button => {
        button.addEventListener('click', () => {
          const category = button.dataset.category;
          currentFilteredBooks = books.filter(book => book.category === category);
          currentPage = 1;
          renderBooks();
          renderTablePage();

          // Update show all button text
          showAllBtn.innerText = `Show All Books (${currentFilteredBooks.length} found)`;
        });
      });

      // Event listener for show all button
      showAllBtn.addEventListener('click', () => {
        currentFilteredBooks = books;
        currentPage = 1;
        renderBooks();
        renderTablePage();
        showAllBtn.innerText = 'Show All Books';
      });

      // Event listener for search input
      searchInput.addEventListener('input', (event) => {
        const query = event.target.value.toLowerCase();
        currentFilteredBooks = books.filter(book =>
          book.title.toLowerCase().includes(query) ||
          book.author.toLowerCase().includes(query) ||
          book.description.toLowerCase().includes(query) ||
          book.category.toLowerCase().includes(query)
        );
        currentPage = 1;
        renderBooks();
        renderTablePage();

        if (query) {
          showAllBtn.innerText = `Show All Books (${currentFilteredBooks.length} found)`;
        } else {
          showAllBtn.innerText = 'Show All Books';
        }
      });

      // Initial render
      renderBooks();
      renderTablePage();
    </script>

    <!-- Footer -->
    <footer class="bg-dark text-light text-center p-4 mt-5">
      <div class="container">
        <div class="row">
          <div class="col-md-4 mb-3">
            <h5>📘 Online Bookstore</h5>
            <p>Your one-stop destination for the latest books in technology, cybersecurity, AI, and UI/UX design.</p>
          </div>
          <div class="col-md-4 mb-3">
            <h5>Quick Links</h5>
            <ul class="list-unstyled">
              <li><a href="index.html" class="text-light">Home</a></li>
              <li><a href="categories.html" class="text-light">Categories</a></li>
              <li><a href="authors.html" class="text-light">Authors</a></li>
              <li><a href="about.html" class="text-light">About Us</a></li>
              <li><a href="faq.html" class="text-light">FAQ</a></li>
            </ul>
          </div>
          <div class="col-md-4 mb-3">
            <h5>Contact Info</h5>
            <p><i class="bi bi-envelope"></i> info@onlinebookstore.com</p>
            <p><i class="bi bi-phone"></i> +1 (555) 123-4567</p>
            <div class="mt-2">
              <a href="#" class="text-light me-3" data-bs-toggle="tooltip" title="Facebook"><i class="bi bi-facebook"></i></a>
              <a href="#" class="text-light me-3" data-bs-toggle="tooltip" title="Twitter"><i class="bi bi-twitter"></i></a>
              <a href="#" class="text-light me-3" data-bs-toggle="tooltip" title="Instagram"><i class="bi bi-instagram"></i></a>
            </div>
          </div>
        </div>
        <hr class="my-3">
        <p class="mb-0">&copy; 2025 Online Bookstore | Designed by Dhruvit Parmar</p>
      </div>
    </footer>

    <script>
      // Initialize tooltips
      var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
      })
    </script>
  </body>
</html>
